{{ $profile := .Site.Config.data.profile }}
{{ $t := .Site.Config.data.translations.en }}
{{ if eq .Page.Config.extra.lang "fr" }}
    {{ $t = .Site.Config.data.translations.fr }}
{{ end }}

<aside class="sidebar">
    <!-- Profile Section -->
    <div class="profile-section">
        <img src="{{ .Site.Config.extra.base_path }}/images/{{ $profile.avatar }}" 
             alt="{{ $profile.name }}" 
             class="avatar">
        <h1 class="name">{{ $profile.name }}</h1>
        <p class="tagline">{{ $t.tagline }}</p>
    </div>
    
    <!-- Contact Section -->
    <div class="sidebar-section">
        <h2 class="section-title">
            {{ $t.section.contact }}
        </h2>
        <ul class="contact-list">
            {{ if $profile.email }}
            <li>
                <i class="fas fa-envelope"></i>
                <a href="mailto:{{ $profile.email }}">
                    {{ $profile.email }}
                </a>
            </li>
            {{ end }}
            
            {{ if $profile.phone }}
            <li>
                <i class="fas fa-phone"></i>
                <span>{{ $profile.phone }}</span>
            </li>
            {{ end }}
            
            {{ if $profile.website }}
            <li>
                <i class="fas fa-globe"></i>
                <a href="https://{{ $profile.website }}" target="_blank" rel="noopener noreferrer">
                    {{ $profile.website }}
                </a>
            </li>
            {{ end }}
            
            {{ if $profile.linkedin }}
            <li>
                <i class="fab fa-linkedin"></i>
                <a href="https://linkedin.com/in/{{ $profile.linkedin }}" target="_blank" rel="noopener noreferrer">
                    {{ $profile.linkedin }}
                </a>
            </li>
            {{ end }}
            
            {{ if $profile.github }}
            <li>
                <i class="fab fa-github"></i>
                <a href="https://github.com/{{ $profile.github }}" target="_blank" rel="noopener noreferrer">
                    {{ $profile.github }}
                </a>
            </li>
            {{ end }}
            
            {{ if $profile.gitlab }}
            <li>
                <i class="fab fa-gitlab"></i>
                <a href="https://gitlab.com/{{ $profile.gitlab }}" target="_blank" rel="noopener noreferrer">
                    {{ $profile.gitlab }}
                </a>
            </li>
            {{ end }}
            
            {{ if $profile.twitter }}
            <li>
                <i class="fab fa-x-twitter"></i>
                <a href="https://x.com/{{ $profile.twitter }}" target="_blank" rel="noopener noreferrer">
                    {{ $profile.twitter }}
                </a>
            </li>
            {{ end }}
            
            {{ if $profile.codewars }}
            <li>
                <i class="fas fa-code"></i>
                <a href="https://www.codewars.com/users/{{ $profile.codewars }}" target="_blank" rel="noopener noreferrer">
                    {{ $profile.codewars }}
                </a>
            </li>
            {{ end }}
        </ul>
        
        <!-- GitHub Stats -->
        {{ if $profile.github }}
        <div class="github-stats">
            <a href="https://github.com/{{ $profile.github }}?tab=followers" target="_blank" rel="noopener noreferrer">
                <img alt="followers" title="Follow me on Github" src="https://custom-icon-badges.demolab.com/github/followers/{{ $profile.github }}?logo=person-add&label=Follow&style=for-the-badge&color=C9CBFF&labelColor=302D41&logoColor=D9E0EE"/>
            </a>
            <a href="https://github.com/{{ $profile.github }}?tab=repositories&sort=stargazers" target="_blank" rel="noopener noreferrer">
                <img alt="total stars" title="Total stars on GitHub" src="https://custom-icon-badges.demolab.com/github/stars/{{ $profile.github }}?style=for-the-badge&logo=star&color=F5E0DC&logoColor=D9E0EE&labelColor=302D41"/>
            </a>
            <a href="https://github-view-counter.tienduy-nguyen-dev.workers.dev/?username={{ $profile.github }}&style=for-the-badge&color=DDB6F2&labelColor=302D41&label=profile%20views" target="_blank" rel="noopener noreferrer">
                <img alt="view counter" title="Github view counter" src="https://github-view-counter.tienduy-nguyen-dev.workers.dev/?username={{ $profile.github }}&style=for-the-badge&color=DDB6F2&labelColor=302D41&label=profile%20views"/>
            </a>
        </div>
        {{ end }}
    </div>
    
    <!-- Education Section -->
    {{ $education := .Site.Config.data.education.education }}
    {{ if $education }}
    <div class="sidebar-section">
        <h2 class="section-title">
            {{ $t.section.education }}
        </h2>
        <div class="education-list">
            {{ range $education }}
                {{ $trans := index $t.education .id }}
            <div class="education-item-sidebar">
                <div class="degree">{{ $trans.degree }}</div>
                <div class="university">{{ .university }}</div>
                <div class="time">{{ .time }}</div>
            </div>
            {{ end }}
        </div>
    </div>
    {{ end }}
    
    <!-- Nationality Section -->
    {{ if $profile.nationalities }}
    <div class="sidebar-section">
        <h2 class="section-title">
            {{ $t.section.nationality }}
        </h2>
        <ul class="nationality-list">
            {{ range $profile.nationalities }}
                {{ $nat := index $t.nationality . }}
            <li>{{ $nat }}</li>
            {{ end }}
        </ul>
    </div>
    {{ end }}
    
    <!-- Driving License Section -->
    {{ if $profile.driving_license }}
    <div class="sidebar-section">
        <h2 class="section-title">
            {{ $t.section.driving_license }}
        </h2>
        <div class="driving-license-info">
            <i class="fas fa-car"></i>
            <span>{{ $profile.driving_license }}</span>
        </div>
    </div>
    {{ end }}
    
    <!-- Languages Section -->
    {{ $languages := .Site.Config.data.languages.language }}
    {{ if $languages }}
    <div class="sidebar-section">
        <h2 class="section-title">
            {{ $t.section.languages }}
        </h2>
        <ul class="language-list">
            {{ range $languages }}
                {{ $trans := index $t.language .id }}
            <li>
                <strong>{{ $trans.name }}:</strong> {{ if .level }}{{ .level }}{{ else }}{{ $trans.level }}{{ end }}
            </li>
            {{ end }}
        </ul>
    </div>
    {{ end }}
    
    <!-- Interests Section -->
    {{ if $profile.interests }}
    <div class="sidebar-section">
        <h2 class="section-title">
            {{ $t.section.interests }}
        </h2>
        <ul class="interest-list">
            {{ range $profile.interests }}
                {{ $trans := index $t.interest . }}
            <li>{{ $trans }}</li>
            {{ end }}
        </ul>
    </div>
    {{ end }}
    
    <!-- Theme Toggle & Language Switcher -->
    <div class="sidebar-section">
        <!-- Theme Toggle Button -->
        <div class="theme-toggle-container">
            <button id="theme-toggle" class="theme-toggle-btn" aria-label="Toggle theme">
                <span class="theme-icon light-icon">
                    <i class="fas fa-sun"></i>
                </span>
                <span class="theme-icon dark-icon">
                    <i class="fas fa-moon"></i>
                </span>
            </button>
        </div>
        
        <!-- Language Switcher -->
        <div class="language-switcher">
            <a href="{{ .Site.Config.extra.base_path }}/en/" {{ if eq .Page.Config.extra.lang "en" }}class="active"{{ end }}>EN</a>
            <span>|</span>
            <a href="{{ .Site.Config.extra.base_path }}/fr/" {{ if eq .Page.Config.extra.lang "fr" }}class="active"{{ end }}>FR</a>
        </div>
    </div>
</aside>
